(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["iframeZhifu"],{"466d":function(e,t,a){"use strict";var n=a("d784"),i=a("825a"),r=a("50c4"),s=a("1d80"),o=a("8aa5"),c=a("14c3");n("match",(function(e,t,a){return[function(t){var a=s(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,a):new RegExp(t)[e](String(a))},function(e){var n=a(t,this,e);if(n.done)return n.value;var s=i(this),u=String(e);if(!s.global)return c(s,u);var d=s.unicode;s.lastIndex=0;var h,l=[],p=0;while(null!==(h=c(s,u))){var f=String(h[0]);l[p]=f,""===f&&(s.lastIndex=o(u,r(s.lastIndex),d)),p++}return 0===p?null:l}]}))},c5e8:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("div",{staticStyle:{"text-align":"center","font-size":"16px",color:"red","margin-top":"20px"}},[e._v(" 支付确认中"+e._s(e.zhifuqurenzhong)+" ")]),a("div",{staticStyle:{"margin-top":"20px","text-align":"center",display:"flex","justify-content":"center"}},[a("div",{staticStyle:{width:"215px",height:"215px"}},[a("div",{ref:"myQrcode"})])]),a("div",{staticStyle:{color:"red","text-align":"center","margin-top":"10px"}},[e._v(" 该二维码仅限本订单使用 ")]),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{src:e.urlZhifu}}),a("div",{staticStyle:{"text-align":"center","margin-top":"70px"},on:{click:e.cancelBtn}},[e._v(" 返回首页 ")]),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{src:e.iframeUrl,frameborder:"0"}})])},i=[],r=a("1da1"),s=(a("96cf"),a("ac1f"),a("466d"),a("c97a")),o=a("d044"),c=a.n(o),u=a("d399"),d={data:function(){return{orderId:null,zhifuqurenzhong:"",ishavepay:0,urlZhifu:"",typePintuan:"",AdvertiseId:"",advId:"",mchId:"",showKey:[],data1:"",token:"",iframeUrl:""}},created:function(){var e=this.$route.params;this.typePintuan=e.type||"",this.token=e.token,this.orderId=e.orderId;var t=this;setTimeout((function(){t.ishavepay=1,u["a"].clear()}),3e5),this.$nextTick((function(){if(e.urlZhifu&&(e.urlZhifu.indexOf(".alipay.com")>0||e.urlZhifu.indexOf(".sandgate.cn")>0||e.urlZhifu.indexOf(".gdpanshi.com")>0))this.urlZhifu=e.urlZhifu,this.initQrCode(e.urlZhifu),this.iframeUrl=e.urlZhifu;else{var t=e.urlZhifu;this.token&&(t=t+"&token="+this.token);var a=encodeURIComponent(t),n="alipays://platformapi/startapp?appId=20000067&url="+a;window.location.href=n,this.initQrCode(n)}0===this.ishavepay&&this.payload();var i=navigator.userAgent,r=!!i.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);r?window.webkit.messageHandlers.paymentAlipay.postMessage(e.urlZhifu):nuandouAndroid.paymentAlipay(e.urlZhifu)}))},mounted:function(){window.closeVideo=this.closeVideo,u["a"].loading({duration:0,message:"支付确认中..."})},destroyed:function(){this.ishavepay=1,u["a"].clear()},methods:{payload:function(){switch(this.zhifuqurenzhong){case"":this.zhifuqurenzhong=".";break;case".":this.zhifuqurenzhong="..";break;case"..":this.zhifuqurenzhong="...";break;case"...":this.zhifuqurenzhong="";break;default:}this.havepay(),setTimeout(this.payload,3e3)},closeVideo:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("navTop/setBackKey",{setBackKey:!1}),u["a"].loading({duration:0,message:"正在处理观看记录",forbidClick:!0}),t.next=4,e.$http.post("/api/v1/AD/QueryShowAdvertise",{advId:e.advId,mchId:e.mchId},{custom:{url:"99",nonce:Object(s["a"])(),timestamp:Object(s["b"])()}});case 4:a=t.sent,e.$store.commit("navTop/setBackKey",{setBackKey:!0}),u["a"].clear(),n=a.data,1===n.code&&e.$router.push("/paysuccess");case 9:case"end":return t.stop()}}),t)})))()},initQrCode:function(e){new c.a(this.$refs.myQrcode,{text:e,width:215,height:215,correctLevel:1})},havepay:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n,i,r,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.ishavepay){t.next=23;break}return t.next=3,e.$http.post("/api/v1/MyOrder/GetOrderPayStatus",{orderId:e.orderId},{custom:{url:"99",nonce:Object(s["a"])(),timestamp:Object(s["b"])()}});case 3:if(a=t.sent,n=a.data,1!==n.code){t.next=23;break}if(e.showKey.push(n.data),!n.data){t.next=23;break}if(e.ishavepay=1,setInterval((function(){u["a"].clear()}),500),"pintuan"!==e.typePintuan){t.next=22;break}return t.next=13,e.$http.post("/api/v1/AD/Get",{},{custom:{url:"99",nonce:Object(s["a"])(),timestamp:Object(s["b"])()}});case 13:i=t.sent,r=i.data,1===r.code&&(e.mchId=r.data.mchId,e.advId=r.data.advId),o=navigator.userAgent,c=!!o.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),e.data1=JSON.stringify(r.data),c?window.webkit.messageHandlers.onItemClick.postMessage(JSON.stringify(r.data)):nuandouAndroid.onItemClick(JSON.stringify(r.data)),t.next=23;break;case 22:e.$router.push("/confirmOrder/wanPayment");case 23:case"end":return t.stop()}}),t)})))()},cancelBtn:function(){this.$router.push({path:"/home/index",replace:!0})}}},h=d,l=a("2877"),p=Object(l["a"])(h,n,i,!1,null,null,null);t["default"]=p.exports}}]);
//# sourceMappingURL=iframeZhifu.9cc58dbc.js.map