(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["GoPay"],{"0cb2":function(e,t,a){var r=a("7b0b"),i=Math.floor,n="".replace,s=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,c=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,a,o,u,d){var l=a+e.length,p=o.length,h=c;return void 0!==u&&(u=r(u),h=s),n.call(d,h,(function(r,n){var s;switch(n.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,a);case"'":return t.slice(l);case"<":s=u[n.slice(1,-1)];break;default:var c=+n;if(0===c)return r;if(c>p){var d=i(c/10);return 0===d?r:d<=p?void 0===o[d-1]?n.charAt(1):o[d-1]+n.charAt(1):r}s=o[c-1]}return void 0===s?"":s}))}},"282d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"goPayBox"},[a("div",{staticStyle:{"background-image":"linear-gradient(to right,#FB6463,#FBB663)",display:"flex","justify-content":"center","align-items":"center",height:"6.25rem","line-height":"6.25rem",color:"#fff","font-size":"1.125rem"}},[e.timeKey?a("span",{staticStyle:{"font-size":".875rem"}},[e._v("剩余时间")]):e._e(),e.timeKey?a("span",{},[e._v(e._s(e.hr)+":"+e._s(e.min)+":"+e._s(e.sec))]):e._e(),e.timeKey?e._e():a("span",{staticStyle:{"font-size":"2.5rem"}},[e._v("￥"+e._s(e.shifukuan))])]),e.timeKey?a("div",{staticStyle:{color:"#FF0000","font-size":"2.25rem","text-align":"center",height:"4.375rem","line-height":"4.375rem",background:"#FFFFFF"}},[e._v(" ￥"+e._s(e.shifukuan)+" ")]):e._e(),a("div",{staticStyle:{padding:".9375rem .9375rem .3125rem",background:"#FFFFFF","margin-top":".625rem"}},[a("div",{},[e._v(" 选择支付方式 ")]),a("div",{staticClass:"pay-type-list"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.zhifubaoKey,expression:"zhifubaoKey"}],staticClass:"type-item",staticStyle:{"border-bottom":".0625rem solid #CCCCCC"},on:{click:function(t){return e.changePayType(1)}}},[a("img",{staticStyle:{width:"1rem","vertical-align":"middle","margin-right":".625rem"},attrs:{src:"http://static.jiujiupingou.com/Static/img/bg23.png",mode:"widthFix"}}),a("div",{staticClass:"con"},[a("span",{staticClass:"tit"},[e._v("支付宝支付"),a("span",{staticClass:"discount1"},[e._v("本单最高减免"+e._s(e.discount)+"元")])])]),a("label",{staticClass:"radio"},[a("radio",{attrs:{value:"",color:"#FB6463",checked:1==e.payType}})],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.zhifubaoKey,expression:"zhifubaoKey"}],staticClass:"type-item",staticStyle:{"border-bottom":"1px solid #CCCCCC"},on:{click:function(t){return e.changePayType(2)}}},[a("img",{staticStyle:{width:"1rem","vertical-align":"middle","margin-right":"10px"},attrs:{src:e.imgSrc("ic_ysf.png"),mode:"widthFix"}}),a("div",{staticClass:"con"},[a("span",{staticClass:"tit"},[e._v("银联/云闪付"),a("span",{staticClass:"discount1"},[e._v("本单最高减免"+e._s(e.discount)+"元")])])]),a("label",{staticClass:"radio"},[a("radio",{attrs:{value:"",color:"#FB6463",checked:2==e.payType}})],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.zhifubaoKey,expression:"zhifubaoKey"}],staticClass:"type-item",staticStyle:{"border-bottom":"1px solid #CCCCCC"},on:{click:function(t){return e.changePayType(3)}}},[a("img",{staticStyle:{width:"1rem","vertical-align":"middle","margin-right":"10px"},attrs:{src:e.imgSrc("pay_ic_wx.png"),mode:"widthFix"}}),a("div",{staticClass:"con"},[a("span",{staticClass:"tit"},[e._v("微信支付"),a("span",{staticClass:"discount1"},[e._v("本单最高减免"+e._s(e.discount)+"元")])])]),a("label",{staticClass:"radio"},[a("radio",{attrs:{value:"",color:"#FB6463",checked:3==e.payType}})],1)]),a("div",{staticClass:"type-item",on:{click:function(t){return e.changePayType(0)}}},[a("img",{staticStyle:{width:"1rem","vertical-align":"middle","margin-right":".625rem"},attrs:{src:"http://static.jiujiupingou.com/Static/img/bg21.png",mode:"widthFix"}}),a("div",{staticClass:"con"},[a("span",[e._v("可用余额"),a("span",{staticStyle:{display:"inline-block",color:"#FF4200","margin-left":".625rem"}},[e._v("¥"+e._s(e.userInfo.Balance)+" ")])])]),a("label",{staticClass:"radio"},[a("radio",{attrs:{value:"",color:"#FB6463",checked:0==e.payType}})],1)])])]),a("div",{staticClass:"sbm1",on:{click:e.querenzhifu}},[e._v(" "+e._s(e.timeCode)+e._s(e.textCode)+" ")])])},i=[],n=a("1da1"),s=(a("ac1f"),a("5319"),a("a9e3"),a("99af"),a("96cf"),a("da71")),c=a("c97a"),o=a("d399"),u=a("5c9c"),d={components:{Radio:u["a"]},data:function(){return{yueBl:!0,zhifubaoBl:!1,userInfo:{},orderId:"",shifukuan:0,hour:0,reset:!1,createTime:"",hr:"",min:"",sec:"",payType:0,aliPay:null,isiOS:null,isAndroid:null,timeCode:"",textCode:"确认支付",disabledCode:!1,zhifubaoKey:!0,timeKey:!0,type:"",saveBtn:!1,discount:0,unionPay:null,wxMiniPay:null}},computed:{imgSrc:function(){return function(e){return s["d"]+e}}},created:function(){var e=this.$route.query;this.getUserInfo(),this.getMyDiscount(),"card"!==e.type?(this.orderId=e.orderId,this.shifukuan=e.shifukuan,this.createTime=e.createTime,this.countdown(this.createTime,60),this.getAliPay()):(this.type=e.type,this.zhifubaoKey=!1,this.timeKey=!1,this.shifukuan=e.shifukuan,this.num=e.num,this.cardTypeId=e.cardTypeId)},methods:{getMyDiscount:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/api/v1/MyOrder/GetMyDiscount",{priceAreaId:e.PriceAreaId||""},{custom:{url:"99",nonce:Object(c["a"])(),timestamp:Object(c["b"])()}});case 2:a=t.sent,a&&(r=a.data,1===r.code&&(e.discount=r.data));case 4:case"end":return t.stop()}}),t)})))()},countdown:function(e,t){var a=this,r=e.replace(/-/g,"/"),i=new Date(r),n=Number(t),s=i.setMinutes(i.getMinutes()+n),c=(new Date).getTime(),o=s-c;if(o>0){var u=parseInt(o/1e3/60/60%24),d=parseInt(o/1e3/60%60),l=parseInt(o/1e3%60);u=u>9?u:"0"+u,d=d>9?d:"0"+d,l=l>9?l:"0"+l,a.hr=u,a.min=d,a.sec=l}else clearInterval(p);var p=setTimeout((function(){a.countdown(a.createTime,60)}),1e3)},getAliPay:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/api/v1/MyOrder/GetPayChannelStatus",{},{custom:{url:"99",nonce:Object(c["a"])(),timestamp:Object(c["b"])()}});case 2:a=t.sent,r=a.data,1===r.code?(e.aliPay=r.data.aliPay,e.unionPay=r.data.unionPay,e.wxMiniPay=r.data.wxMiniPay):Object(o["a"])(r.msg);case 5:case"end":return t.stop()}}),t)})))()},changePayType:function(e){this.payType=e,1!==this.payType||this.aliPay?2!==this.payType||this.unionPay?3!==this.payType||this.wxMiniPay||Object(o["a"])("微信支付通道升级维护中"):Object(o["a"])("云闪付通道升级维护中"):Object(o["a"])("支付宝通道升级维护中")},getUserInfo:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/api/v1/UserInfo/Get",{type:1},{custom:{url:"99",nonce:Object(c["a"])(),timestamp:Object(c["b"])()}});case 2:a=t.sent,r=a.data,1===r.code&&(e.userInfo=r.data);case 5:case"end":return t.stop()}}),t)})))()},setInterValFunc:function(){var e=this;this.timeCode=30,this.textCode="秒",this.setTime=setInterval((function(){e.timeCode-1==0?(e.timeCode="",e.textCode="确认支付",e.disabledCode=!1,clearInterval(e.setTime)):e.timeCode--}),1e3)},querenzhifu:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,i,n,u,d,l,p,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e,1!=a.payType){t.next=5;break}if(a.aliPay){t.next=5;break}return Object(o["a"])("支付宝通道升级维护中"),t.abrupt("return");case 5:if(2!==e.payType){t.next=9;break}if(e.unionPay){t.next=9;break}return Object(o["a"])("云闪付通道升级维护中"),t.abrupt("return");case 9:if(3!==e.payType){t.next=13;break}if(e.wxMiniPay){t.next=13;break}return Object(o["a"])("微信支付通道升级维护中"),t.abrupt("return");case 13:if(3!==e.payType){t.next=16;break}return e.$router.push({name:"cashing",params:{urlZhifu:"".concat(s["c"],"/WxPay/Index?orderId=").concat(e.orderId),orderId:e.orderId,typeBuy:"wx"}}),t.abrupt("return",!1);case 16:if(r=null,!e.disabledCode){t.next=20;break}return Object(o["a"])("请30秒后重试"),t.abrupt("return");case 20:if(i={},r="/api/v1/MyOrder/AppPayV2",i={custom:{url:"99",nonce:Object(c["a"])(),timestamp:Object(c["b"])(),codePay:"支付"}},n="","card"===e.type){t.next=34;break}return e.disabledCode=!0,e.setInterValFunc(),o["a"].loading({duration:0,message:"加载中...",forbidClick:!0}),t.next=30,a.$http.post(r,{orderId:e.orderId,method:e.payType},i);case 30:u=t.sent,u&&(n=u.data),t.next=49;break;case 34:if(!e.saveBtn){t.next=36;break}return t.abrupt("return",!1);case 36:if(e.saveBtn=!0,!(a.userInfo.Balance<a.shifukuan)){t.next=40;break}return Object(o["a"])("余额不足"),t.abrupt("return",!1);case 40:return t.next=42,a.$http.post("/api/v1/BlessingCard/Buy",{cardTypeId:a.cardTypeId,amount:a.num},i);case 42:if(d=t.sent,!d){t.next=48;break}if(1!==d.data.code){t.next=48;break}return Object(o["a"])("下单成功"),setTimeout((function(){e.saveBtn=!1,e.$router.go(-3)}),2e3),t.abrupt("return",!1);case 48:e.saveBtn=!1;case 49:0===a.payType?0===n.code?(o["a"].clear(),Object(o["a"])("下单成功"),setTimeout((function(){e.$router.push("/orderList?orderType=All")}),1e3)):(o["a"].clear(),Object(o["a"])(n.msg)):0===n.code?(o["a"].clear(),l=navigator.userAgent,p=new MobileDetect(l),h=p.os(),"AndroidOS"==h||"iOS"==h?2===e.payType?e.$router.push({name:"cashing",params:{urlZhifu:n.data,orderId:a.orderId}}):e.$router.push({name:"iframeZhifu",params:{urlZhifu:n.data,orderId:a.orderId}}):e.$router.push("/confirmOrder/orderQrcode?orderId="+a.orderId+"&url="+n.data)):(o["a"].clear(),Object(o["a"])(n.msg));case 50:case"end":return t.stop()}}),t)})))()}}},l=d,p=(a("2919"),a("2877")),h=Object(p["a"])(l,r,i,!1,null,null,null);t["default"]=h.exports},2919:function(e,t,a){"use strict";a("c44a")},"3df4":function(e,t,a){},5319:function(e,t,a){"use strict";var r=a("d784"),i=a("d039"),n=a("825a"),s=a("50c4"),c=a("a691"),o=a("1d80"),u=a("8aa5"),d=a("0cb2"),l=a("14c3"),p=a("b622"),h=p("replace"),f=Math.max,m=Math.min,y=function(e){return void 0===e?e:String(e)},v=function(){return"$0"==="a".replace(/./,"$0")}(),b=function(){return!!/./[h]&&""===/./[h]("a","$0")}(),g=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));r("replace",(function(e,t,a){var r=b?"$":"$0";return[function(e,a){var r=o(this),i=void 0==e?void 0:e[h];return void 0!==i?i.call(e,r,a):t.call(String(r),e,a)},function(e,i){if("string"===typeof i&&-1===i.indexOf(r)&&-1===i.indexOf("$<")){var o=a(t,this,e,i);if(o.done)return o.value}var p=n(this),h=String(e),v="function"===typeof i;v||(i=String(i));var b=p.global;if(b){var g=p.unicode;p.lastIndex=0}var x=[];while(1){var C=l(p,h);if(null===C)break;if(x.push(C),!b)break;var k=String(C[0]);""===k&&(p.lastIndex=u(h,s(p.lastIndex),g))}for(var w="",I=0,T=0;T<x.length;T++){C=x[T];for(var O=String(C[0]),_=f(m(c(C.index),h.length),0),j=[],S=1;S<C.length;S++)j.push(y(C[S]));var P=C.groups;if(v){var F=[O].concat(j,_,h);void 0!==P&&F.push(P);var $=String(i.apply(void 0,F))}else $=d(O,h,_,j,P,i);_>=I&&(w+=h.slice(I,_)+$,I=_+O.length)}return w+h.slice(I)}]}),!g||!v||b)},"5c9c":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"redio",class:{active:e.checked},style:e.divStyle},[a("i",{staticClass:"iconfont icondui"})])},i=[],n={props:{color:{type:String,default:"#000"},checked:{type:Boolean,default:!1}},computed:{divStyle:function(){return{color:this.color,border:"1px solid ".concat(this.checked?this.color:"#d1d1d1"),backgroundColor:this.checked?this.color:"#fff"}}}},s=n,c=(a("f7c7"),a("2877")),o=Object(c["a"])(s,r,i,!1,null,null,null);t["a"]=o.exports},c44a:function(e,t,a){},f7c7:function(e,t,a){"use strict";a("3df4")}}]);
//# sourceMappingURL=GoPay.6fe00ea0.js.map